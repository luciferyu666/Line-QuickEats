<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>🍔 QuickEats - 快餐達人</title>
    <link rel="stylesheet" href="styles.css" />
    <!-- 加載LINE LIFF SDK -->
    <script src="https://static.line-scdn.net/liff/edge/2.1/liff.js"></script>
  </head>
  <body>
    <!-- 頂部橫幅標題 -->
    <header>
      <h1>🍔 歡迎來到 QuickEats</h1>
      <p>輕鬆點餐，快捷享用！</p>
    </header>

    <!-- 登錄和開始點餐的部分 -->
    <main>
      <!-- 用戶個人信息 -->
      <div id="profile">
        <p id="profileInfo">🔍 加載中...</p>
      </div>

      <!-- 開始點餐按鈕 -->
      <button id="startOrderButton" style="display: none">🚀 開始點餐</button>
    </main>

    <!-- 版權信息 -->
    <footer>
      <p>© 2024 QuickEats. All Rights Reserved.</p>
    </footer>

    <script>
      // 初始化 LIFF SDK
      async function initializeLiff() {
        const profileInfoElement = document.getElementById("profileInfo");
        const startOrderButton = document.getElementById("startOrderButton");

        try {
          // 初始化 LIFF，替換 'YOUR_LIFF_ID' 為實際的 LIFF ID
          await liff.init({ liffId: "YOUR_LIFF_ID" });

          // 檢查是否已登錄 LINE
          if (!liff.isLoggedIn()) {
            liff.login(); // 如果未登錄，則重定向到 LINE 登錄頁面
            return;
          }

          // 已登錄，獲取用戶信息
          const profile = await liff.getProfile();
          profileInfoElement.textContent = `🎉 歡迎, ${profile.displayName}!`;
          startOrderButton.style.display = "block";

          // 綁定按鈕行為
          startOrderButton.addEventListener("click", () => {
            window.location.href = "https://quick-eats-two.vercel.app/"; // 跳轉到 QuickEats 點餐系統
          });

          console.log("LIFF 初始化成功！");
        } catch (error) {
          console.error("LIFF 初始化失敗：", error);
          profileInfoElement.textContent = "❌ 無法加載 LIFF，請稍後再試。";
        }
      }

      // 頁面加載時初始化 LIFF
      window.onload = initializeLiff;
    </script>
  </body>
</html>
